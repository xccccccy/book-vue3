import{a as n}from"./index.15c82977.js";import{_ as d}from"./plugin-vue_export-helper.21dcd24c.js";import{o as p,e as _,u as m,f as e,r as v}from"./vendor.d34d5b7e.js";var h="./assets/music-one.0e44b57f.svg",f="./assets/data-switch.dd76c158.svg",y="./assets/download.761ab2f0.svg",g="./assets/music-set.79825ef2.svg",w="./assets/power.54a068a2.svg";const x={name:"MusicPlayer",data(){return{audio:null,curmusic:{name:"\u6B4C\u540D",artist:"\u6B4C\u624B",url:""}}},mounted(){},methods:{initaudiowithserver(t,r,s){var l="https://api.i-meto.com/meting/api?server=:server&type=:type&id=:id&r=:r",i=[],o=Math.random(),u=l.replace(":server",t).replace(":type",r).replace(":id",s).replace(":r",o);n.get(u,{}).then(c=>{for(let a of c.data)i.push({name:a.title,artist:a.author,url:a.url,cover:a.pic,lrc:a.lrc});this.audio=i}).catch(c=>{console.log(c)})},initdefaultaudio(){this.audio=[{name:"rainmood",artist:"\u53EF\u4E50\u52A0\u51B0",url:"/public/rainmood.m4a",cover:"/public/rain.jpeg",lrc:"\u6682\u65E0\u6B4C\u8BCD\u3002"},{name:"\u98DE\u9E1F\u4E0E\u8749",artist:"\u4EFB\u7136",url:"/public/\u4EFB\u7136 - \u98DE\u9E1F\u548C\u8749.mp3",cover:"/public/rain.jpeg",lrc:"\u6682\u65E0\u6B4C\u8BCD\u3002"}]},preventautoplay(){const{media:t}=this.$refs.true_player;t.paused||(console.log("\u963B\u6B62\u81EA\u52A8\u64AD\u653E\uFF01"),this.$refs.true_player.pause())},initaudio(t){if(t.default_player_type||!0)this.initdefaultaudio();else{let s=t.server||"netease",l=t.type||"playlist",i=t.id||"2676066674";this.initaudiowithserver(s,l,i)}this.preventautoplay(),this.curmusic=this.$refs.true_player.currentMusic},handleEvent(t){this.curmusic=t},switchpalylist(t){console.log(t)}},props:{mini:{type:Boolean,default:!1},fixed:{type:Boolean,default:!1},lrcType:{type:Number,default:3},listFolded:{type:Boolean,default:!1}}},b={class:"player-parent"},B=e("div",{class:"music-title"},[e("span",null,"\u5F53\u524D\u6B4C\u5355\uFF1A"),e("span",null,"\u559C\u6B22\u7684\u97F3\u4E50")],-1),j={class:"music-tool"},F=e("div",null,[e("a",{href:"/music",title:"\u97F3\u4E50\u4E3B\u9875"},[e("img",{src:h})])],-1),M=e("img",{src:f},null,-1),T=[M],k=["href","download","title"],E=e("img",{src:y},null,-1),N=[E],C=e("div",null,[e("a",{href:"/music",title:"\u76F8\u5173\u97F3\u4E50\u8BBE\u7F6E"},[e("img",{src:g})])],-1),L=e("div",null,[e("a",{href:"javascript:void(0);",title:"\u5173\u95ED\u97F3\u4E50"},[e("img",{src:w})])],-1);function P(t,r,s,l,i,o){const u=v("aplayer");return p(),_("div",b,[B,m(u,{class:"player",ref:"true_player",audio:i.audio,lrcType:s.lrcType,fixed:s.fixed,mini:s.mini,listFolded:s.listFolded,onListSwitch:o.handleEvent},null,8,["audio","lrcType","fixed","mini","listFolded","onListSwitch"]),e("div",j,[F,e("div",null,[e("a",{href:"javascript:void(0);",title:"\u5207\u6362\u6B4C\u5355",onClick:r[0]||(r[0]=c=>o.switchpalylist(1))},T)]),e("div",null,[e("a",{href:i.curmusic.url,download:i.curmusic.name+"-"+i.curmusic.artist+".mp3",title:"\u4E0B\u8F7D\u300A"+i.curmusic.name+"-"+i.curmusic.artist+"\u300B"},N,8,k)]),C,L])])}var z=d(x,[["render",P]]);export{z as _};
