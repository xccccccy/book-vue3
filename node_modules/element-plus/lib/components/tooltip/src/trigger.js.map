{"version":3,"file":"trigger.js","sources":["../../../../../../packages/components/tooltip/src/trigger.vue"],"sourcesContent":["<template>\n  <el-popper-trigger\n    :id=\"id\"\n    :virtual-ref=\"virtualRef\"\n    :open=\"open\"\n    :virtual-triggering=\"virtualTriggering\"\n    :class=\"ns.e('trigger')\"\n    @blur=\"onBlur\"\n    @click=\"onClick\"\n    @contextmenu=\"onContextMenu\"\n    @focus=\"onFocus\"\n    @mouseenter=\"onMouseenter\"\n    @mouseleave=\"onMouseleave\"\n    @keydown=\"onKeydown\"\n  >\n    <slot />\n  </el-popper-trigger>\n</template>\n\n<script lang=\"ts\">\nimport { defineComponent, inject, ref, toRef, unref } from 'vue'\nimport { ElPopperTrigger } from '@element-plus/components/popper'\nimport { composeEventHandlers } from '@element-plus/utils'\nimport { EVENT_CODE } from '@element-plus/constants'\nimport { useNamespace } from '@element-plus/hooks'\nimport { TOOLTIP_INJECTION_KEY } from './tokens'\nimport { useTooltipTriggerProps } from './tooltip'\nimport { whenTrigger } from './utils'\n\nimport type { OnlyChildExpose } from '@element-plus/components/slot'\n\nexport default defineComponent({\n  name: 'ElTooltipTrigger',\n  components: {\n    ElPopperTrigger,\n  },\n  props: useTooltipTriggerProps,\n  setup(props) {\n    const ns = useNamespace('tooltip')\n    const { controlled, id, open, onOpen, onClose, onToggle } = inject(\n      TOOLTIP_INJECTION_KEY,\n      undefined\n    )!\n    const triggerRef = ref<OnlyChildExpose | null>(null)\n\n    const stopWhenControlledOrDisabled = () => {\n      if (unref(controlled) || props.disabled) {\n        return true\n      }\n    }\n    const trigger = toRef(props, 'trigger')\n    const onMouseenter = composeEventHandlers(\n      stopWhenControlledOrDisabled,\n      whenTrigger(trigger, 'hover', onOpen)\n    )\n    const onMouseleave = composeEventHandlers(\n      stopWhenControlledOrDisabled,\n      whenTrigger(trigger, 'hover', onClose)\n    )\n    const onClick = composeEventHandlers(\n      stopWhenControlledOrDisabled,\n      whenTrigger(trigger, 'click', (e) => {\n        // distinguish left click\n        if ((e as MouseEvent).button === 0) {\n          onToggle(e)\n        }\n      })\n    )\n\n    const onFocus = composeEventHandlers(\n      stopWhenControlledOrDisabled,\n      whenTrigger(trigger, 'focus', onOpen)\n    )\n\n    const onBlur = composeEventHandlers(\n      stopWhenControlledOrDisabled,\n      whenTrigger(trigger, 'focus', onClose)\n    )\n\n    const onContextMenu = composeEventHandlers(\n      stopWhenControlledOrDisabled,\n      whenTrigger(trigger, 'contextmenu', (e: Event) => {\n        e.preventDefault()\n        onToggle(e)\n      })\n    )\n\n    const onKeydown = composeEventHandlers(\n      stopWhenControlledOrDisabled,\n      (e: KeyboardEvent) => {\n        const { code } = e\n        if (code === EVENT_CODE.enter || code === EVENT_CODE.space) {\n          onToggle(e)\n        }\n      }\n    )\n\n    return {\n      onBlur,\n      onContextMenu,\n      onFocus,\n      onMouseenter,\n      onMouseleave,\n      onClick,\n      onKeydown,\n      open,\n      id,\n      triggerRef,\n      ns,\n    }\n  },\n})\n</script>\n"],"names":["defineComponent","ElPopperTrigger","useTooltipTriggerProps","useNamespace","inject","TOOLTIP_INJECTION_KEY","ref","unref","toRef","composeEventHandlers","whenTrigger","EVENT_CODE","_createBlock","_normalizeClass","_renderSlot"],"mappings":"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"}